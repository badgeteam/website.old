{{ define "main" }}
{{ "<!-- Project single -->" | safeHTML }}
<div class="w3-row">
  {{ $blogs := where .Site.RegularPages "Section" "blog" }}
  {{ $project_blogs  := first 10 (where $blogs "Params.projects" "intersect" .Params.projects) }}
  {{ $project_blogs_count := len $project_blogs }}
  {{ if ge $project_blogs_count 1 }}
  {{ "<!-- Blogs -->" | safeHTML }}
  <div class="w3-col">
    {{ range $project_blogs }}
      {{- $blogpage := . }}
      {{- $image := "" }}
      {{- if .Params.image_src }}
        {{- $image = .Resources.GetMatch .Params.image_src }}
      {{- end }}
    <!-- Blog entry -->
    <div class="w3-card w3-margin w3-white">
      {{ if $image }}
		  <img class="" src="{{ $image.RelPermalink }}" alt="{{ .Params.image_alt }}" style="width:100%">
		  {{ end }}
      <div class="w3-container">
        {{- if .Params.icon_name }}
          {{- $icon_pack := ( .Params.icon_pack | default "fa") }}
        <h3 class="w3-text-black"><b><i class="{{ $icon_pack }} {{ .Params.icon_name }} w3-margin-right w3-large w3-text-teal"></i></b>{{ (.Title | default .Site.Title) }}</h3>
        {{- else }}
        <h3 class="w3-text-black"><b><i class="fa fa-suitcase w3-margin-right w3-large w3-text-teal"></i></b>{{ (.Title | default .Site.Title) }}</h3>
        {{- end }}
        {{- $author := "" }}
        {{- $link   := "" }}
        {{- with .Params.Author }}
          {{- $author   = (partial `functions/get_team_member_displayname` $blogpage ) }}
          {{- $profile := (partial `functions/get_team_member_profile` $blogpage ) }}
          {{- with $profile }}
            {{- $link   = .RelPermalink }}
          {{- end }}
        {{- end }}
        <span class="w3-left w3-opacity w3-small">{{ .Date.Format "Monday, 02 January 2006 15:04 MST" }}{{if .Params.Author}} - {{ if $link }}<a href="{{ $link }}">{{ end }}{{ $author }}{{ if $link }}</a>{{ end }}{{ end }}</span>
      </div>
      <div class="w3-container">
        <p>{{ .Description }}</p>
        <div class="w3-row">
          <div class="w3-col m8 s12">
            <p><a class="w3-button w3-padding-large w3-white w3-border" title="Read More" alt="Read More" href="{{ .Permalink }}"><b>READ MORE &raquo;</b></a></p>
          </div>
        </div>
      </div>
    </div>
    {{ end }}
  </div>
  {{ "<!-- End blogs -->" | safeHTML }}
  {{ end }}
</div>
{{ "<!-- End project single -->" | safeHTML }}
{{ end }}

{{ define "page-header" }}
<header class="w3-container w3-center">
  {{- if .Params.icon_name }}
    {{- $icon_pack := ( .Params.icon_pack | default "fa") }}
  <h3 class="w3-left w3-text-black"><b><i class="{{ $icon_pack }} {{ .Params.icon_name }} w3-margin-right w3-xlarge w3-text-teal"></i></b>{{ .Title | default .Site.Title }}</h3>
  {{- else }}
  <h3 class="w3-left w3-text-black"><b><i class="fa fa-suitcase w3-margin-right w3-xlarge w3-text-teal"></i></b>{{ .Title | default .Site.Title }}</h3>
  {{- end }}
</header>
{{ end }}

{{ define "aside-left" }}
<!-- About Project -->
<div class="w3-card w3-margin w3-margin-top">
  {{- $image := "" }}
  {{- if .Params.image_src }}
    {{- $image = .Resources.GetMatch .Params.image_src }}
  {{- end }}
  {{ if $image }}
  <img class="" src="{{ $image.RelPermalink }}" alt="{{ .Params.image_alt }}" style="width:100%">
  {{ end }}
  <div class="w3-container w3-white">
    {{- if .Params.icon_name }}
      {{- $icon_pack := ( .Params.icon_pack | default "fa") }}
    <h4 class="w3-text-black"><b><i class="{{ $icon_pack }} {{ .Params.icon_name }} w3-margin-right w3-large w3-text-teal"></i></b>{{ (.Title | default .Site.Title) | truncate 20 }}</h4>
    {{- else }}
    <h4 class="w3-text-black"><b><i class="fa fa-suitcase w3-margin-right w3-large w3-text-teal"></i></b>{{ (.Title | default .Site.Title) | truncate 25 }}</h4>
    {{- end }}
    <p>{{ .Description }}</p>
  </div>
</div>

{{ partial "widgets/recent-updates.html" . }}
{{ partial "widgets/taxo-cloud.html" . }}
{{ end }}
