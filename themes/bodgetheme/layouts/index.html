{{ define "main" }}
{{ "<!-- Index page -->" | safeHTML }}
{{- if .Content }}
<article> {{ "<!-- Projects -->" | safeHTML }}
  <div class="w3-container w3-center">
    <h3 class="w3-left">{{ .Title | title }}</h3>
  </div>
  <hr>
  <section> {{ "<!-- Active projects -->" | safeHTML }}
    <div class="w3-row-padding">
    {{- .Content }}
    </div>
  </section>  {{ "<!-- White bottom -->" | safeHTML }}
  <hr>
{{- end }}
      <article> {{ "<!-- Projects -->" | safeHTML }}
        <div class="w3-container w3-center">
          <h3 class="w3-left">Projects</h3>
        </div>
        <hr>
	{{- $projects := where .Site.RegularPages "Section" "project" }}
	{{- $current  := where (where .Site.RegularPages "Params.active" true) "Params.archived" false }}
	{{- $current_projects := $projects | intersect $current }}
	{{- $current_projects_count := len $current_projects }}
        <section> {{ "<!-- Active projects -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">Active Projects</h4>
          </div>
	{{- if ge $current_projects_count 1 }}
	        <div class="w3-row-padding">
		{{- range $current_projects }}
			{{- $image_file := "" }}
			{{- $image_src  := "" }}
			{{- if .Params.image_src }}
				{{- $image_file = .Resources.GetMatch .Params.image_src }}
			{{- else }}
			  {{ if .Site.Params.defaultImage }}
			    {{- $image_file = .Resources.GetMatch .Site.Params.defaultImage }}
					{{- $image_src = .Site.Params.defaultImage }}
				{{ else }}
				  {{- $image_src = "/images/mascot_600x600.png" }}
				{{ end }}
			{{- end }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .Params.Short_Title | default .Title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-card">
      {{- if $image_file }}
  			{{- $image := $image_file.Resize "600x600" }}
									<img class="w3-hover-grayscale" src="{{ $image.RelPermalink }}" alt="{{ .Params.Short_Title | default .Title }}" style="width:100%">
			{{- else }}
			            <img class="w3-hover-grayscale" src="{{ $image_src }}" alt="{{ .Params.Short_Title | default .Title }}" style="width:100%">
			{{- end }}
                  <div class="w3-container w3-center"><h5>{{ .Params.Short_Title | default .Title | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no active projects.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- End Active projects -->" | safeHTML }}
        <hr>
	{{- $inactive  := where (where .Site.RegularPages "Params.active" false) "Params.archived" false }}
	{{- $inactive_projects := $projects | intersect $inactive }}
	{{- $inactive_projects_count := len $inactive_projects }}
        <section> {{ "<!-- Finished projects -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">Finished Projects</h4>
          </div>
	{{- if ge $inactive_projects_count 1 }}
	        <div class="w3-row-padding">
		{{- range $inactive_projects }}
			{{- $image_file := "" }}
			{{- $image_src  := "" }}
			{{- if .Params.image_src }}
				{{- $image_file = .Resources.GetMatch .Params.image_src }}
			{{- else }}
			  {{ if .Site.Params.defaultImage }}
			    {{- $image_file = .Resources.GetMatch .Site.Params.defaultImage }}
					{{- $image_src = .Site.Params.defaultImage }}
				{{ else }}
				  {{- $image_src = "/images/mascot_600x600.png" }}
				{{ end }}
			{{- end }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .Params.Title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-card">
      {{- if $image_file }}
  			{{- $image := $image_file.Resize "600x600" }}
									<img class="w3-hover-grayscale" src="{{ $image.RelPermalink }}" alt="{{ .Params.Short_Title | default .Title }}" style="width:100%">
			{{- else }}
			            <img class="w3-hover-grayscale" src="{{ $image_src }}" alt="{{ .Params.Short_Title | default .Title }}" style="width:100%">
			{{- end }}
                  <div class="w3-container w3-center"><h5>{{ .Params.Short_Title | default .Title | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- End Finished projects -->" | safeHTML }}
				<hr>
      </article> {{ "<!-- End Projects -->" | safeHTML }}
{{ "<!-- Index page -->" | safeHTML }}

{{ "<!-- Temporary showcase -->" | safeHTML }}
{{- $prjs := slice }}
      <article> {{ "<!-- Temporary format samples -->" | safeHTML }}
        <div class="w3-container w3-center">
          <h3 class="w3-left">Temporary format examples</h3>
        </div>
        <hr>
	{{- $inactive  := where (where .Site.RegularPages "Params.active" false) "Params.archived" false }}
	{{- $inactive_projects := last 4 ($projects | intersect $inactive) }}
	{{- $inactive_projects_count := len $inactive_projects }}
        <section> {{ "<!-- White bottom -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">White bottom</h4>
          </div>
	{{- if ge $inactive_projects_count 1 }}
	        <div class="w3-row-padding">
		{{- range $inactive_projects }}
			{{- $image_file := "" }}
			{{- $image_src  := "" }}
			{{- if .Params.image_src }}
				{{- $image_file = .Resources.GetMatch .Params.image_src }}
			{{- else }}
			  {{ if .Site.Params.defaultImage }}
			    {{- $image_file = .Resources.GetMatch .Site.Params.defaultImage }}
					{{- $image_src = .Site.Params.defaultImage }}
				{{ else }}
				  {{- $image_src = "/images/mascot_600x600.png" }}
				{{ end }}
			{{- end }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .Title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-card">
      {{- if $image_file }}
  			{{- $image := $image_file.Resize "600x600" }}
									<img class="w3-hover-grayscale" src="{{ $image.RelPermalink }}" alt="{{ .Params.Short_Title | default .Title }}" style="width:100%">
					{{- $prj := dict "title" ( .Title ) "description" ( .Params.Short_Title | default .Title ) "alt" (.Params.Short_Title | default .Title) "src" $image.RelPermalink }}
					{{- $prjs = $prjs | append $prj}}
			{{- else }}
			            <img class="w3-hover-grayscale" src="{{ $image_src }}" alt="{{ .Params.Short_Title | default .Title }}" style="width:100%">
			{{- end }}
                  <div class="w3-container w3-center"><h5>{{ .Params.Short_Title | default .Title | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- White bottom -->" | safeHTML }}
				<hr>

	{{- $prjs_count := len $prjs }}
        <section> {{ "<!-- Black bottom -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">Black bottom</h4>
          </div>
	{{- if ge $prjs_count 1 }}
	        <div class="w3-row-padding">
		{{- range $prjs }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-card">
			            <img class="w3-hover-grayscale" src="{{ .src }}" alt="{{ .alt }}" style="width:100%">
                  <div class="w3-container w3-center w3-black w3-text-white"><h5>{{ .description | truncate 18  }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- Black bottom -->" | safeHTML }}
				<hr>

				<section> {{ "<!-- White text transparent centered -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">White text transparent centered</h4>
          </div>
	{{- if ge $prjs_count 1 }}
	        <div class="w3-row-padding">
		{{- range $prjs }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-display-container">
			            <img class="w3-hover-grayscale" src="{{ .src }}" alt="{{ .alt }}" style="width:100%">
                  <div class="w3-display-middle w3-text-white"><h5>{{ .description | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- White text transparent centered -->" | safeHTML }}
				<hr>

				<section> {{ "<!-- Black texted opacity centered -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">Black texted opacity centered</h4>
          </div>
	{{- if ge $prjs_count 1 }}
	        <div class="w3-row-padding">
		{{- range $prjs }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-display-container">
			            <img class="w3-hover-grayscale" src="{{ .src }}" alt="{{ .alt }}" style="width:100%">
                  <div class="w3-display-middle w3-white w3-text-black w3-padding w3-opacity"><h5>{{ .description | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- EBlack texted opacity centered -->" | safeHTML }}
				<hr>

				<section> {{ "<!-- Black texted no opacity centered -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">Black texted no opacity centered</h4>
          </div>
	{{- if ge $prjs_count 1 }}
	        <div class="w3-row-padding">
		{{- range $prjs }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-display-container">
			            <img class="w3-hover-grayscale" src="{{ .src }}" alt="{{ .alt }}" style="width:100%">
                  <div class="w3-display-middle w3-white w3-text-black w3-padding"><h5>{{ .description | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- Black texted no opacity centered -->" | safeHTML }}
				<hr>

				<section> {{ "<!-- White texted opacity centered -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">White texted opacity centered</h4>
          </div>
	{{- if ge $prjs_count 1 }}
	        <div class="w3-row-padding">
		{{- range $prjs }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-display-container">
			            <img class="w3-hover-grayscale" src="{{ .src }}" alt="{{ .alt }}" style="width:100%">
                  <div class="w3-display-middle w3-black w3-text-white w3-padding w3-opacity"><h5>{{ .description | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- White texted opacity centered -->" | safeHTML }}
				<hr>

				<section> {{ "<!-- White texted no opacity centered -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">White texted no opacity centered</h4>
          </div>
	{{- if ge $prjs_count 1 }}
	        <div class="w3-row-padding">
		{{- range $prjs }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-display-container">
			            <img class="w3-hover-grayscale" src="{{ .src }}" alt="{{ .alt }}" style="width:100%">
                  <div class="w3-display-middle w3-black w3-text-white w3-padding"><h5>{{ .description | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- White texted no opacity centered -->" | safeHTML }}
				<hr>

				<section> {{ "<!-- White texted no opacity top left -->" | safeHTML }}
          <div class="w3-container w3-center">
            <h4 class="w3-left">White texted no opacity top left</h4>
          </div>
	{{- if ge $prjs_count 1 }}
	        <div class="w3-row-padding">
		{{- range $prjs }}
            <div class="w3-col l3 m6 w3-margin-bottom">
              <a title="{{ .title }}" href="{{ .RelPermalink }}" style="text-decoration:none;">
                <div class="w3-display-container">
			            <img class="w3-hover-grayscale" src="{{ .src }}" alt="{{ .alt }}" style="width:100%">
                  <div class="w3-display-topleft w3-black w3-text-white w3-padding"><h5>{{ .description | truncate 18 }}</h5></div>
                </div>
              </a>
            </div>
    {{- end }}
  {{- else }}
            <div class="w3-container w3-center w3-margin-bottom"><h5>There are currently no project finished yet.</h5></div>
  {{- end }}
          </div>
        </section>  {{ "<!-- White texted no opacity top left -->" | safeHTML }}
				<hr>
      </article> {{ "<!-- End Temporary format samples -->" | safeHTML }}
{{ "<!-- End Temporary showcase -->" | safeHTML }}















			<br><br><br>

{{ "<!-- End index page -->" | safeHTML }}
{{ end }}
